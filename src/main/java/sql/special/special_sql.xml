<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="special">
	<resultMap type="com.spring.special.vo.SpecialVo" id="specialVo">
    	<result property="s_num" 	column="SPECIAL_NUM"/>
    	<result property="s_title" 	column="SPECIAL_TITLE"/>
    	<result property="s_image" 	column="SPECIAL_IMAGE"/>
    	<result property="s_theme" 	column="SPECIAL_THEME"/>
    	<result property="s_notice" 	column="SPECIAL_NOTICE"/>
    	<result property="s_linkImg" 	column="LINK_IMG"/>
    	<result property="s_brandId" 	column="BRAND_ID"/>
    </resultMap>
    
    <resultMap type="com.spring.brand.vo.BrandVo" id="brandVo">
    	<result property="br_Init" 	column="BRAND_INIT"/>
    	<result property="br_Id" 	column="BRAND_ID"/>
    	<result property="br_Name" 	column="BRAND_NAME"/>
    	<result property="br_Detail" 	column="BRAND_DETAIL"/>
    </resultMap>
    
    
    <!-- 기획전페이지  -->
    <select id="specialList" parameterType="com.spring.special.vo.SpecialVo" resultMap="specialVo">
	    SELECT
		    SPECIAL_NUM
		    ,SPECIAL_TITLE
		    ,SPECIAL_IMAGE
		    ,SPECIAL_THEME
		    ,SPECIAL_NOTICE
		    ,LINK_IMG
		    ,SPECIAL.BRAND_ID
	    
	    FROM
		    SPECIAL,BRAND
		    
	    WHERE
		    SPECIAL.BRAND_ID=BRAND.BRAND_ID
	    
    </select>
    
    <!--디테일 페이지  -->
    <select id="specialView" parameterType="com.spring.special.vo.SpecialVo" resultMap="specialVo">
		SELECT
			BAN_IMG
			,GOODS_CLASSIFY
			,GOODS_IMAGE  
			,BRAND_NAME 
			,GOODS_NAME  
			,GOODS_PRICE
			,GOODS_SALEPCT
			,GOODS_LIKE
			,GOODS_REVIEW
			,GOODS_COLOR
		
		FROM
			GOODS,BRAND,BANNER
			
		WHERE
			GOODS.GOODS_NUM=BANNER.GOODS_NUM
		AND
			GOODS.BRAND_ID=BRAND.BRAND_ID
			    	
    </select>
    
    <!-- 기획전추가 -->
    <select id="specialInsert" parameterType="com.spring.special.vo.SpecialVo" >
    	INSERT INTO
    	SPECIAL(
	    	SPECIAL_NUM
		    ,SPECIAL_TITLE
		    ,SPECIAL_IMAGE
		    ,SPECIAL_THEME
		    ,SPECIAL_NOTICE
		    ,LINK_IMG 
		    ,BRAND_ID
		    )
		VALUES
			(
			(SELECT
					TO_NUMBER(NVL(MAX(SPECIAL_NUM)+1,1))
	    		FROM
	    			SPECIAL)
			,#{s_title}
			,#{s_image}
			,#{s_theme}
			,#{s_notice}
			,#{s_linkImg}
			,#{s_brandId}
			)
    </select>
    
    <!-- 기획전삭제 -->
    <select id="specialDelete" parameterType="com.spring.special.vo.SpecialVo" >
    DELETE 
    	FROM SPECIAL
	WHERE 
		SPECIAL_NUM = #{s_Num}
    </select>
    
    <!--기획전 테마 불러오기-->
    <select id="s_themeList" resultMap="brandVo">
    	SELECT 
    		BRAND_INIT
    		,BRAND_ID
    		,BRAND_NAME
    		,BRAND_DETAIL
    	FROM
    		BRAND
    	WHERE
    		DATA_TYPE = 'theme'
    	ORDER BY
    		BRAND_ID
    </select>

    <!--브랜드 리스트 불러오기-->
    <select id="s_brandList" resultMap="brandVo">
    	SELECT 
    		BRAND_INIT
    		,BRAND_ID
    		,BRAND_NAME
    		,BRAND_DETAIL
    	FROM
    		BRAND
    	WHERE
    		DATA_TYPE = 'brand'
    	ORDER BY
    		BRAND_ID
    </select>
</mapper>